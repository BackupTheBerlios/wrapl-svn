.PHONY: GtkGObject GtkGtk GtkGdk GtkAtk GtkPango GtkGlade

CFLAGS += -std=gnu99
LDFLAGS += Std.rlib Riva.rlib Gtk/Gtk.rlib

GTK_LIB_DIR = $(LIB_DIR)Gtk$(DIRSEP)
GTK_SRC_DIR = $(SRC_DIR)Gtk$(DIRSEP)
GTK_OBJ_DIR = $(OBJ_DIR)Gtk$(DIRSEP)
GTK_AUTOGEN = $(file Autogen.log)

api.raw: $(file api.sources)
	gapi2-parser $(file api.sources)

api.xml: api.raw $(file api.metadata)
	cp $(file api.raw) api.xml
	gapi2-fixup --api=api.xml --metadata=$(file api.metadata)

$(GTK_AUTOGEN): api.xml
	riva -L $(GTK_SRC_DIR) Main $(file api.xml)

clean:
	$(rm api.xml)
	$(rm $(GTK_AUTOGEN))

.SUBDIRS: GObject Gtk Gdk Pango Glade

Gtk: GtkGObject $(GTK_AUTOGEN) GtkGtk GtkGdk GtkPango GtkGlade
